<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>McNamara Park Horse Search</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #121212;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #e0e0e0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        /* Login Modal */
        #login-modal {
            display: flex;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(18, 18, 18, 0.95);
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        #login-modal input {
            padding: 10px 15px;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            margin-bottom: 10px;
            width: 250px;
        }

        #login-modal button {
            padding: 10px 20px;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            background-color: #4fc3f7;
            color: #121212;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #login-modal button:hover {
            background-color: #81d4fa;
        }

        /* Search Bar */
        #search-container {
            width: 100%;
            max-width: 800px;
            margin-bottom: 30px;
        }

        #search-bar {
            width: 100%;
            padding: 15px 20px;
            font-size: 18px;
            border-radius: 30px;
            border: none;
            outline: none;
            background-color: #1e1e1e;
            color: #e0e0e0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            transition: background-color 0.3s;
        }

        #search-bar::placeholder {
            color: #aaaaaa;
        }

        #search-bar:focus {
            background-color: #2a2a2a;
        }

        /* Horse List */
        #horse-list {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .horse-card {
            background-color: #1e1e1e;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        .horse-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);
        }

        .horse-title {
            font-size: 20px;
            font-weight: 600;
            color: #4fc3f7;
        }

        .horse-type {
            font-size: 16px;
            color: #b0bec5;
            margin-top: 8px;
        }

        .additional-info {
            margin-top: 10px;
            font-size: 14px;
            color: #aaa;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 40px 20px;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: #1e1e1e;
            margin: auto;
            padding: 30px;
            border-radius: 20px;
            max-width: 900px;
            position: relative;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #e0e0e0;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.2s;
        }

        .close-btn:hover {
            color: #ff5252;
        }

        .modal-header {
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: #4fc3f7;
        }

        .modal-body {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .modal-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .modal-section h3 {
            color: #81d4fa;
            margin-bottom: 10px;
        }

        .modal-section img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        .sire-dam-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .sire-dam-card {
            background-color: #2a2a2a;
            padding: 15px;
            border-radius: 10px;
            flex: 1;
            min-width: 200px;
            text-align: center;
        }

        .sire-dam-card img {
            width: 100%;
            height: auto;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .sire-dam-card a {
            color: #81d4fa;
            text-decoration: none;
            font-weight: bold;
        }

        .sire-dam-card a.mc-dam {
            color: #ffab40;
            font-weight: bold;
        }

        .paddock-images {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .paddock-images img {
            width: calc(33.333% - 10px);
            border-radius: 10px;
            object-fit: cover;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .modal-body {
                flex-direction: column;
            }

            .sire-dam-container {
                flex-direction: column;
            }

            .paddock-images img {
                width: 100%;
            }

            #login-modal input {
                width: 80%;
            }
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div id="login-modal">
        <h2 style="color:#4fc3f7; margin-bottom:20px;">Enter Password to Access</h2>
        <input type="password" id="password-input" placeholder="Password">
        <button id="login-button">Enter</button>
        <p id="login-error" style="color:#ff5252; margin-top:10px; display:none;">Incorrect Password. Try Again.</p>
    </div>

    <!-- Search Bar -->
    <div id="search-container">
        <input type="text" id="search-bar" placeholder="Search horses by stable name, race name, sire, or dam...">
    </div>

    <!-- Horse List -->
    <div id="horse-list">
        <!-- Horse cards will be dynamically added here -->
    </div>

    <!-- Modal Popup -->
    <div id="horse-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div class="modal-header">
                <h2 id="modal-title">Horse Details</h2>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h3>Horse Photo</h3>
                    <img id="horse-photo" src="" alt="Horse Photo">
                </div>

                <div class="modal-section">
                    <h3>Paddock</h3>
                    <img id="paddock-image" src="" alt="Paddock Image">
                </div>

                <div class="modal-section">
                    <h3>Sire & Dam</h3>
                    <div class="sire-dam-container">
                        <div class="sire-dam-card">
                            <img id="sire-photo" src="" alt="Sire Photo">
                            <p id="sire-name">Sire Name</p>
                        </div>
                        <div class="sire-dam-card">
                            <img id="dam-photo" src="" alt="Dam Photo">
                            <p id="dam-name"><a href="#" id="dam-link">Dam Name</a></p>
                        </div>
                    </div>
                </div>

                <div class="modal-section">
                    <h3>Medical Images</h3>
                    <div class="paddock-images">
                        <img id="scope-image" src="" alt="Scope Image">
                        <img id="xray-image" src="" alt="X-Ray Image">
                    </div>
                </div>

                <div class="modal-section">
                    <h3>Additional Information</h3>
                    <p id="born-on-stud"></p>
                    <p id="broken-in"></p>
                    <p id="birth-date"></p>
                    <p id="microchip-number"></p>
                    <p id="id-card"><a href="#" target="_blank">View ID Card</a></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const horses = [
            {
                stableName: 'Millie',
                raceName: 'Unnamed',
                sireName: 'Yes Yes Yes',
                damName: 'Wutai Mountain',
                type: 'Unraced',
                gender: 'Filly',
                photo: 'photos/millie.png',
                paddock: 'paddocks/4.png',
                sirePhoto: 'photos/speed_king.png',
                damPhoto: 'photos/queen_grace.png',
                scopeImage: 'medical/scope_champion.png',
                xrayImage: 'medical/xray_champion.png',
                brokenIn: true,
                bornOnStud: true,
                damMcNamara: true,
                birthDate: '2018-04-23',
                microchipNumber: 'MC123456789',
                idCard: 'idcards/champion_id.pdf'
            },
            {
                stableName: 'Midnight',
                raceName: 'Dark Moon',
                sireName: 'Eclipse',
                damName: 'Starshine',
                type: 'Broodmare',
                gender: 'Mare',
                photo: 'photos/midnight.png',
                paddock: 'paddocks/2.png',
                sirePhoto: 'photos/eclipse.png',
                damPhoto: 'photos/starshine.png',
                scopeImage: 'medical/scope_midnight.png',
                xrayImage: 'medical/xray_midnight.png',
                brokenIn: false,
                bornOnStud: false,
                damMcNamara: false,
                birthDate: '2017-06-15',
                microchipNumber: 'MC987654321',
                idCard: 'idcards/midnight_id.pdf'
            },
            {
                stableName: 'Star',
                raceName: 'Starlight',
                sireName: 'Galaxy',
                damName: 'Comet',
                type: 'Yearling',
                gender: 'Filly',
                photo: 'photos/star.png',
                paddock: 'paddocks/3.png',
                sirePhoto: 'photos/galaxy.png',
                damPhoto: 'photos/comet.png',
                scopeImage: 'medical/scope_star.png',
                xrayImage: 'medical/xray_star.png',
                brokenIn: true,
                bornOnStud: false,
                damMcNamara: true,
                birthDate: '2019-09-10',
                microchipNumber: 'MC112233445',
                idCard: 'idcards/star_id.pdf'
            },
            {
                stableName: 'Comet',
                raceName: 'Trailblazer',
                sireName: 'Meteor',
                damName: 'Aurora',
                type: 'Weanling',
                gender: 'Colt',
                photo: 'photos/comet.png',
                paddock: 'paddocks/4.png',
                sirePhoto: 'photos/meteor.png',
                damPhoto: 'photos/aurora.png',
                scopeImage: 'medical/scope_comet.png',
                xrayImage: 'medical/xray_comet.png',
                brokenIn: false,
                bornOnStud: true,
                damMcNamara: false,
                birthDate: '2020-01-05',
                microchipNumber: 'MC556677889',
                idCard: 'idcards/comet_id.pdf'
            },
            {
                stableName: 'Sassy',
                raceName: 'Thunderbolt',
                sireName: 'Wild Wind',
                damName: 'Lightning',
                type: 'Pony',
                gender: 'Gelding',
                photo: 'photos/sassy.png',
                paddock: 'paddocks/5.png',
                sirePhoto: 'photos/wild_wind.png',
                damPhoto: 'photos/lightning.png',
                scopeImage: 'medical/scope_sassy.png',
                xrayImage: 'medical/xray_sassy.png',
                brokenIn: true,
                bornOnStud: false,
                damMcNamara: false,
                birthDate: '2021-03-22',
                microchipNumber: 'MC998877665',
                idCard: 'idcards/sassy_id.pdf'
            },
            // Add more horse objects as needed
        ];

        const horseList = document.getElementById('horse-list');
        const searchBar = document.getElementById('search-bar');
        const modal = document.getElementById('horse-modal');
        const closeBtn = document.querySelector('.close-btn');

        const modalTitle = document.getElementById('modal-title');
        const horsePhoto = document.getElementById('horse-photo');
        const paddockImage = document.getElementById('paddock-image');
        const sirePhoto = document.getElementById('sire-photo');
        const sireName = document.getElementById('sire-name');
        const damPhoto = document.getElementById('dam-photo');
        const damName = document.getElementById('dam-name');
        const damLink = document.getElementById('dam-link');
        const scopeImage = document.getElementById('scope-image');
        const xrayImage = document.getElementById('xray-image');
        const bornOnStud = document.getElementById('born-on-stud');
        const brokenIn = document.getElementById('broken-in');
        const birthDate = document.getElementById('birth-date');
        const microchipNumber = document.getElementById('microchip-number');
        const idCard = document.getElementById('id-card');

        const loginModal = document.getElementById('login-modal');
        const passwordInput = document.getElementById('password-input');
        const loginButton = document.getElementById('login-button');
        const loginError = document.getElementById('login-error');

        function calculateAge(birthDate) {
            const birth = new Date(birthDate);
            const today = new Date();
            let age = today.getFullYear() - birth.getFullYear();
            const m = today.getMonth() - birth.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < birth.getDate())) {
                age--;
            }
            return age;
        }

        function displayHorses(horsesToDisplay) {
            horseList.innerHTML = '';
            if (horsesToDisplay.length === 0) {
                horseList.innerHTML = '<p style="text-align:center; color:#aaa;">No horses found.</p>';
                return;
            }
            horsesToDisplay.forEach(horse => {
                const age = calculateAge(horse.birthDate);
                const ageDisplay = age > 0 ? `${age} Year${age > 1 ? 's' : ''}` : 'Less than 1 Year';
                const horseCard = document.createElement('div');
                horseCard.classList.add('horse-card');
                horseCard.innerHTML = `
                    <div class="horse-title">${horse.stableName} | ${horse.raceName}</div>
                    <div class="horse-type">${horse.type} ∘ ${horse.gender} ∘ ${ageDisplay}</div>
                    <div class="additional-info">
                        ${horse.bornOnStud ? '<span>Born on Stud</span><br>' : ''}
                        ${horse.brokenIn ? '<span>Broken In</span>' : '<span>Not Broken In</span>'}
                    </div>
                `;
                horseCard.onclick = () => openModal(horse);
                horseList.appendChild(horseCard);
            });
        }

        function openModal(horse) {
            modalTitle.textContent = `${horse.stableName} | ${horse.raceName}`;
            horsePhoto.src = horse.photo;
            horsePhoto.alt = `${horse.stableName} Photo`;
            paddockImage.src = horse.paddock;
            paddockImage.alt = `${horse.stableName} Paddock`;
            sirePhoto.src = horse.sirePhoto;
            sirePhoto.alt = `${horse.sireName} Photo`;
            sireName.textContent = horse.sireName;
            damPhoto.src = horse.damPhoto;
            damPhoto.alt = `${horse.damName} Photo`;
            damName.innerHTML = `<a href="#" id="dam-link">${horse.damName}</a>`;
            scopeImage.src = horse.scopeImage;
            scopeImage.alt = `${horse.stableName} Scope Image`;
            xrayImage.src = horse.xrayImage;
            xrayImage.alt = `${horse.stableName} X-Ray Image`;

            bornOnStud.textContent = horse.bornOnStud ? 'Born on Stud: Yes' : 'Born on Stud: No';
            brokenIn.textContent = horse.brokenIn ? 'Broken In: Yes' : 'Broken In: No';
            birthDate.textContent = `Birth Date: ${horse.birthDate}`;
            microchipNumber.textContent = `Microchip Number: ${horse.microchipNumber}`;
            idCard.innerHTML = `<a href="${horse.idCard}" target="_blank">View ID Card</a>`;

            const damLinkElement = document.getElementById('dam-link');
            if (horse.damMcNamara) {
                damLinkElement.classList.add('mc-dam');
                damLinkElement.href = '#';
                damLinkElement.onclick = (e) => {
                    e.preventDefault();
                    const dam = horses.find(h => h.stableName === horse.damName || h.raceName === horse.damName);
                    if (dam) {
                        openModal(dam);
                    }
                };
            } else {
                damLinkElement.classList.remove('mc-dam');
                damLinkElement.href = '#';
                damLinkElement.onclick = null;
            }

            modal.style.display = 'block';
        }

        function closeModal() {
            modal.style.display = 'none';
        }

        closeBtn.onclick = closeModal;

        window.onclick = function(event) {
            if (event.target === modal) {
                closeModal();
            }
        };

        function authenticate() {
            const password = passwordInput.value;
            if (password === 'Shibuki_21') {
                loginModal.style.display = 'none';
            } else {
                loginError.style.display = 'block';
            }
        }

        loginButton.onclick = authenticate;

        passwordInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                authenticate();
            }
        });

        displayHorses(horses);

        searchBar.addEventListener('input', () => {
            const searchTerm = searchBar.value.toLowerCase();
            const filteredHorses = horses.filter(horse =>
                horse.stableName.toLowerCase().includes(searchTerm) ||
                horse.raceName.toLowerCase().includes(searchTerm) ||
                horse.sireName.toLowerCase().includes(searchTerm) ||
                horse.damName.toLowerCase().includes(searchTerm)
            );
            displayHorses(filteredHorses);
        });
    </script>
</body>
</html>
